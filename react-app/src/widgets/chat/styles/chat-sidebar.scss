/**
 * @module ChatSidebarStyles
 * Стили для компонента ChatSidebar.
 * Обеспечивает отображение боковой панели со списком чатов.
 */

.chat-sidebar {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  width: 16rem;
  height: 100%;
  border-right: 1px solid var(--black-20);
  background-color: var(--background);

  &__header {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1rem;
    border-bottom: 1px solid var(--black-20);
  }

  &__title {
    margin: 0;
    color: var(--main);
    font-weight: 500;
    font-style: medium;
    font-size: 1rem;
  }

  &__search {
    position: relative;

    &-input {
      width: 100%;
      padding: 0.5rem 0.75rem 0.5rem 2rem;
      border: 1px solid transparent;
      border-radius: 0.375rem;
      background-color: var(--black-20);
      color: var(--foreground);
      font-size: 0.875rem;
      transition: all 0.2s ease;

      &:focus {
        border-color: var(--accent);
        background-color: var(--background);
        outline: none;
      }

      &::placeholder {
        color: var(--black-40);
      }
    }

    &-icon {
      position: absolute;
      top: 50%;
      left: 0.5rem;
      color: var(--black-40);
      pointer-events: none;
      transform: translateY(-50%);

      svg {
        width: 1rem;
        height: 1rem;
      }
    }
  }

  &__actions {
    display: flex;
    gap: 0.5rem;
  }

  &__action-button {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.5rem;
    border: none;
    border-radius: 0.375rem;
    background-color: var(--accent);
    color: var(--white);
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;

    &:hover {
      background-color: var(--main);
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    svg {
      width: 1rem;
      height: 1rem;
    }

    &_secondary {
      background-color: var(--black-20);
      color: var(--foreground);

      &:hover {
        background-color: var(--black-40);
      }
    }
  }

  &__content {
    flex: 1;
    overflow-y: auto;
    padding: 0.5rem;

    // Скрыть скроллбар для Firefox
    scrollbar-width: thin;
    scrollbar-color: var(--black-20) transparent;

    // Скрыть скроллбар для WebKit браузеров
    &::-webkit-scrollbar {
      width: 4px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 2px;
      background: var(--black-20);

      &:hover {
        background: var(--black-40);
      }
    }
  }

  &__chats-list {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  &__chat-preview {
    overflow: hidden;
    color: var(--black-40);
    font-size: 0.75rem;
    line-height: 1.3;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  &__chat-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.25rem;
    color: var(--black-40);
    font-size: 0.6875rem;
  }

  &__chat-title {
    flex: 1;
    overflow: hidden;
    margin: 0;
    color: var(--foreground);
    font-weight: 500;
    font-size: 0.875rem;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  &__chat-item {
    position: relative;
    display: flex;
    align-items: center;
    padding: 0.75rem;
    border-radius: 0.5rem;
    background-color: transparent;
    cursor: pointer;
    transition: all 0.2s ease;

    &:hover {
      background-color: var(--black-20);
    }

    &_active {
      background-color: var(--main);
      color: var(--white);

      .chat-sidebar__chat-title {
        color: var(--white);
      }

      .chat-sidebar__chat-preview {
        color: rgb(255 255 255 / 70%);
      }

      .chat-sidebar__chat-meta {
        color: rgb(255 255 255 / 50%);
      }
    }

    &_loading {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  &__chat-content {
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: 0.25rem;
    min-width: 0;
  }

  &__chat-header {
    display: flex;
    gap: 0.5rem;
    justify-content: space-between;
    align-items: flex-start;
  }

  &__chat-actions {
    display: flex;
    gap: 0.25rem;
    opacity: 0;
    transition: opacity 0.2s ease;

    .chat-sidebar__chat-item:hover & {
      opacity: 1;
    }
  }

  &__chat-action-button {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0.25rem;
    border: none;
    border-radius: 0.25rem;
    background: none;
    color: inherit;
    cursor: pointer;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: var(--black-20);
    }

    svg {
      width: 0.875rem;
      height: 0.875rem;
    }

    &_danger:hover {
      background-color: rgb(255 0 0 / 20%);
      color: #f44;
    }
  }

  &__chat-message-count {
    min-width: 1.25rem;
    padding: 0.125rem 0.375rem;
    border-radius: 0.75rem;
    background-color: var(--accent);
    color: var(--white);
    font-weight: 600;
    font-size: 0.625rem;
    text-align: center;
  }

  &__empty-state {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 2rem 1rem;
    color: var(--black-40);
    text-align: center;

    &-icon {
      width: 2rem;
      height: 2rem;
      margin-bottom: 0.75rem;
      opacity: 0.5;
    }

    &-title {
      margin-bottom: 0.25rem;
      color: var(--foreground);
      font-weight: 500;
      font-size: 0.875rem;
    }

    &-description {
      font-size: 0.75rem;
      line-height: 1.4;
    }
  }

  &__loading-state {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 2rem 1rem;
    color: var(--black-40);

    &-spinner {
      width: 1.5rem;
      height: 1.5rem;
      margin-bottom: 0.75rem;
      border: 2px solid var(--black-20);
      border-top: 2px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    &-text {
      font-size: 0.75rem;
    }
  }

  // Стили для TextButton как в Tests
  &__button {
    margin: 0;
    padding: 0.5rem 1rem;
    border: 0.15rem solid var(--accent);
    border-radius: 4px;
    background: transparent;
    color: var(--accent);
    font-weight: 500;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    &:hover:not(:disabled) {
      background: var(--accent);
      color: var(--background);
    }
  }

  &-title {
    margin-bottom: 0.5rem;
    color: #f44;
    font-weight: 600;
    font-size: 0.75rem;
  }

  &-actions {
    display: flex;
    gap: 0.5rem;
  }

  &-button {
    padding: 0.25rem 0.5rem;
    border: none;
    border-radius: 0.25rem;
    background-color: #f44;
    color: var(--white);
    font-size: 0.6875rem;
    cursor: pointer;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: #c33;
    }

    &_cancel {
      background-color: var(--black-40);
      color: var(--foreground);

      &:hover {
        background-color: var(--black-20);
      }
    }
  }
}

// Анимации
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

// Адаптивность
@media (width <= 768px) {
  .chat-sidebar {
    width: 14rem;

    &__header {
      padding: 0.75rem;
    }

    &__title {
      font-size: 1rem;
    }

    &__content {
      padding: 0.25rem;
    }

    &__chat-item {
      padding: 0.5rem;
    }

    &__chat-title {
      font-size: 0.8125rem;
    }

    &__chat-preview {
      font-size: 0.6875rem;
    }

    &__empty-state {
      padding: 1rem 0.5rem;

      &-icon {
        width: 1.5rem;
        height: 1.5rem;
      }

      &-title {
        font-size: 0.8125rem;
      }

      &-description {
        font-size: 0.6875rem;
      }
    }
  }
}
