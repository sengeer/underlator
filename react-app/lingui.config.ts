import { defineConfig } from '@lingui/cli';
import { formatter } from '@lingui/format-po';
import { DEFAULT_LOCALE } from './src/shared/lib/constants';

/**
 * Lingui конфигурация для интернационализации React приложения
 *
 * @description Настраивает Lingui для интернационализации React приложения
 * с поддержкой русского и английского языков и автоматической генерацией переводов.
 *
 * Документация: https://lingui.dev/
 */

export default defineConfig({
  /**
   * Исходный язык приложения
   *
   * @description Указывает язык, на котором написан исходный код приложения.
   * Все строки в коде считаются на этом языке.
   *
   * Обоснование: Исходный язык определяет базовый язык для переводов
   * и используется для генерации ключей переводов.
   *
   * Документация: https://lingui.dev/ref/conf#sourcelocale
   */
  sourceLocale: DEFAULT_LOCALE,

  /**
   * Поддерживаемые языки
   *
   * @description Определяет список языков, которые поддерживает приложение.
   * Каждый язык будет иметь свой каталог переводов.
   *
   * Обоснование: Поддержка нескольких языков обеспечивает
   * интернационализацию приложения для разных пользователей.
   *
   * Документация: https://lingui.dev/ref/conf#locales
   */
  locales: ['ru', 'en'],

  /**
   * Конфигурация каталогов переводов
   *
   * @description Определяет где и как создавать каталоги переводов
   * для каждого поддерживаемого языка.
   *
   * Обоснование: Каталоги переводов содержат все строки для перевода
   * и их переводы на разные языки.
   *
   * Документация: https://lingui.dev/ref/conf#catalogs
   */
  catalogs: [
    {
      /**
       * Путь к каталогам переводов
       *
       * @description Определяет шаблон пути для каталогов переводов.
       * {locale} заменяется на код языка (ru, en).
       *
       * Обоснование: Структурированная организация переводов
       * упрощает управление и поддержку интернационализации.
       *
       * Документация: https://lingui.dev/ref/conf#catalogs-path
       */
      path: 'src/shared/lib/i18n/locales/{locale}/messages',

      /**
       * Директории для сканирования
       *
       * @description Определяет какие директории сканировать
       * для поиска строк, требующих перевода.
       *
       * Обоснование: Сканирование всей директории src обеспечивает
       * автоматическое обнаружение всех строк для перевода.
       *
       * Документация: https://lingui.dev/ref/conf#catalogs-include
       */
      include: ['src'],
    },
  ],

  /**
   * Формат файлов переводов
   *
   * @description Определяет формат файлов переводов.
   * PO формат широко поддерживается инструментами перевода.
   *
   * Обоснование: PO формат обеспечивает совместимость
   * с внешними инструментами перевода и версионирования.
   *
   * Документация: https://lingui.dev/ref/conf#format
   */
  format: formatter({
    /**
     * Отключение номеров строк
     *
     * @description Отключает включение номеров строк в PO файлы
     * для уменьшения размера файлов и упрощения версионирования.
     *
     * Обоснование: Номера строк могут часто изменяться при рефакторинге,
     * что создает ненужные изменения в файлах переводов.
     *
     * Документация: https://lingui.dev/ref/conf#format-lineNumbers
     */
    lineNumbers: false,
  }),
});
